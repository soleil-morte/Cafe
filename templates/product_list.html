{% extends 'base.html' %}

{% block title %}Ombor - Restaurant Pro{% endblock %}
{% block page_title %}Ombor Boshqaruvi{% endblock %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
    <h1>Mahsulotlar Ro'yxati</h1>
    <a href="{% url 'product_add' %}" class="btn btn-primary">+ Yangi Mahsulot</a>
</div>

<div class="table">
    <div class="table-header">
        <div>Nomi</div>
        <div>Miqdor</div>
        <div>Birlik</div>
        <div>Sotib olish narxi</div>
        <div>Amallar</div>
    </div>
    
    {% for product in products %}
    <div class="table-row">
        <div><strong>{{ product.name }}</strong></div>
        <div>
            <span {% if product.is_low_stock %}style="color: var(--danger); font-weight: 600;"{% endif %}>
                {{ product.available_quantity }}
            </span>
            {% if product.reserved_quantity > 0 %}
            <small style="color: var(--warning);">({{ product.reserved_quantity }} rezerv)</small>
            {% endif %}
        </div>
        <div>{{ product.get_unit_display }}</div>
        <div>{{ product.purchase_price }} so'm</div>
        <div class="action-buttons">
            <a href="{% url 'product_edit' product.id %}" class="btn" style="background: var(--info); color: white; padding: 8px 12px; font-size: 0.9rem;">‚úèÔ∏è</a>
            <a href="{% url 'product_delete' product.id %}" class="btn" style="background: var(--danger); color: white; padding: 8px 12px; font-size: 0.9rem;" onclick="return confirm('{{ product.name }} ni o\'chirmoqchimisiz?')">üóëÔ∏è</a>
        </div>
    </div>
    {% empty %}
    <div class="table-row">
        <div colspan="5" style="text-align: center; padding: 40px; color: #666;">
            Hozircha mahsulotlar mavjud emas
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}