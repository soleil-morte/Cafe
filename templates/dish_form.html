{% extends "base.html" %}

{% block title %}{{ title }} - –ö–∞—Ñ–µ –£—é—Ç–Ω–æ–µ{% endblock %}

{% block content %}
<div class="container">
    <div class="form-header">
        <h1>{{ title }}</h1>
        <a href="/menu/" class="btn">‚Üê –ù–∞–∑–∞–¥ –∫ –º–µ–Ω—é</a>
    </div>

    <div class="form-container">
        <form method="post" class="dish-form" id="dish-form" enctype="multipart/form-data">
            {% csrf_token %}

            <div class="form-section">
                <h3>üìù –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>

                <div class="form-group">
                    <label for="{{ dish_form.name.id_for_label }}">–ù–∞–∑–≤–∞–Ω–∏–µ –±–ª—é–¥–∞:</label>
                    {{ dish_form.name }}
                </div>

                <div class="form-group">
                    <label for="{{ dish_form.description.id_for_label }}">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                    {{ dish_form.description }}
                </div>

                <div class="form-group">
                    <label for="{{ dish_form.price.id_for_label }}">–¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏ (—Å—É–º):</label>
                    {{ dish_form.price }}
                </div>

                <div class="form-group">
                    <label for="{{ dish_form.image.id_for_label }}">–§–æ—Ç–æ –±–ª—é–¥–∞:</label>
                    {{ dish_form.image }}
                    {% if dish_form.instance.image %}
                    <div class="current-image">
                        <p>–¢–µ–∫—É—â–µ–µ —Ñ–æ—Ç–æ:</p>
                        <img src="{{ dish_form.instance.image.url }}" alt="{{ dish_form.instance.name }}">
                    </div>
                    {% endif %}
                </div>
            </div>

            <div class="form-section">
                <div class="section-header">
                    <h3>ü•ò –ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã</h3>
                    <button type="button" class="btn btn-sm" id="add-ingredient">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç</button>
                </div>
                <p class="form-help">–£–∫–∞–∂–∏—Ç–µ –ø—Ä–æ–¥—É–∫—Ç—ã –∏ –∏—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–ª—è –æ–¥–Ω–æ–π –ø–æ—Ä—Ü–∏–∏</p>

                {{ formset.management_form }}
                <div class="ingredients-formset" id="ingredients-formset">
                    {% for form in formset %}
                    <div class="ingredient-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label>–ü—Ä–æ–¥—É–∫—Ç:</label>
                                {{ form.product }}
                            </div>
                            <div class="form-group">
                                <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</label>
                                {{ form.quantity }}
                            </div>
                            <div class="form-group delete-group">
                                <label>–£–¥–∞–ª–∏—Ç—å:</label>
                                {{ form.DELETE }}
                            </div>
                        </div>
                        {% for hidden in form.hidden_fields %}
                        {{ hidden }}
                        {% endfor %}
                    </div>
                    {% endfor %}
                </div>
            </div>

            <button type="submit" class="btn primary">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –±–ª—é–¥–æ</button>
        </form>
    </div>
</div>
{% endblock %}